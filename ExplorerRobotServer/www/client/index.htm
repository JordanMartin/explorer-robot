<!DOCTYPE html>
    
    <html>
        <head>
            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0">

            <title>Explorer Robot controll center</title>
            <link href="css/style.css" rel="stylesheet"/>
            <link href="css/bootstrap.min.css" rel="stylesheet"/>
            <link href="css/jquery-ui.min.css" rel="stylesheet"/>
        </head>
        
        <body>
            
            <div class="container">                               
                <!-- Nav tabs -->
                <ul class="nav nav-tabs">
                  <li><a href="#homeTab" data-toggle="tab">Home</a></li>
                  <li><a href="#configurationTab" data-toggle="tab">Configuration</a></li>
                  <li><a href="#controlTab" data-toggle="tab">Control</a></li>
                  <li class="active"><a href="#mappingTab" data-toggle="tab" id="mappingTabLink">Mapping</a></li>
                </ul>
                
                <!-- Tab panes -->
                <div class="tab-content">
                    
            <!-- ============= HOME TAB CONTENT ================= -->
                <div class="tab-pane" id="homeTab">
                    <div class="page-header">
                        <h1>Explorer Robot controll center</h1>
                    </div>
                    
                    <li>Use a NXT or EV3 robot as a explorer robot</li>
                    <li>Control the robot with a virtual joystick</li>
                    <li>Real time mapping of a room</li>
                    <li>Download the map after mapping</li>
					
					<h3>Demonstration</h3>
					<div style="text-align: center">
						<video controls src="full_demo.mp4"></video>
					</div>
                </div>
                
                
            <!-- ============= CONFIGURATION TAB CONTENT================= -->
                <div class="tab-pane" id="configurationTab">
                    
                    <div class="panel panel-primary">
                        <div class="panel-heading">Configuration</div>
                        <div class="panel-body">
                            
                            <fieldset>

                                <legend>
                                    Robot :
                                    <label><input name="robotType" type="radio" value="ev3" checked="checked"> EV3</label>
                                    <label><input name="robotType" type="radio" value="nxt"> NXT</label>
                                </legend>
                                
                                <label for="control">Websocket url : <input class="url" type="text" id="apiWsUrl"></label>
                                <button type="button" class="btn btn-danger btn-sm" id="btnWebSocketConnect" data-loading-text="Connecting..." data-connected-text="[Connected] Click to disconnect to the WS server">[Disconnected] Click to connect to the WS server</button>
                                
                                <br>
                                    
                                <label>
                                    Type of connection : <input name="connectionType" type="radio" value="bt" checked="checked"> Bluetooth    
                                </label>
                                
                                <br>
                                    
                                <label>
                                    NXT Name : <input type="text" id="nxtName" value="NXT">
                                </label>
                                
                                <label>
                                    NXT Address : <input type="text" id="nxtAddress" value="0016530F2C26">
                                </label>
                                
                                <br>
                                    
                                <label>
                                    EV3 com port :
                                    <select id="ev3ComPort">
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4" selected="selected">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                        <option value="7">7</option>
                                        <option value="8">8</option>
                                        <option value="9">9</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                        <option value="13">13</option>
                                        <option value="14">14</option>
                                        <option value="15">15</option>
                                        <option value="16">16</option>
                                        <option value="17">17</option>
                                        <option value="18">18</option>
                                        <option value="19">19</option>
                                        <option value="20">20</option>
                                    </select>
                                </label>
                                
                                <br><br>
                                
                                <div id="robotPort">
                                    
                                    <div id="sensorPort">
                                        <label>
                                            Left ultrasonic sensor :
                                            <select id="leftSonarSensor">
                                                <option value="One" selected="selected">1</option>
                                                <option value="Two">2</option>
                                                <option value="Three">3</option>
                                                <option value="Four">4</option>
                                            </select>
                                        </label>
                                        
                                        <label>
                                            Front ultrasonic sensor :
                                            <select id="frontSonarSensor">
                                                <option value="One">1</option>
                                                <option value="Two">2</option>
                                                <option value="Three" selected="selected">3</option>
                                                <option value="Four">4</option>
                                            </select>
                                        </label>
                                                                                
                                        <label>
                                            Right ultrasonic sensor :
                                            <select id="rightSonarSensor">
                                                <option value="One">1</option>
                                                <option value="Two">2</option>
                                                <option value="Three">3</option>
                                                <option value="Four" selected="selected">4</option>
                                            </select>
                                        </label>
                                        
                                        <label>
                                            Compass sensor :
                                            <select id="compassSensor">
                                                <option value="One">1</option>
                                                <option value="Two" selected="selected">2</option>
                                                <option value="Three">3</option>
                                                <option value="Four">4</option>
                                            </select>
                                        </label>    
                                    </div>
                                    
                                    <div id="motorPort">
                                        <label>
                                            Left motor :
                                            <select id="leftMotor">
                                                <option value="A" selected="selected">A</option>
                                                <option value="B">B</option>
                                                <option value="C">C</option>
                                                <option value="D">D</option>
                                            </select>
                                        </label>    
                                        
                                        <label>
                                            Right motor :
                                            <select id="rightMotor">
                                                <option value="A">A</option>
                                                <option value="B">B</option>
                                                <option value="C">C</option>
                                                <option value="D" selected="selected">D</option>
                                            </select>
                                        </label>    
                                    </div>
                                </div>
                                
                                <button type="button" class="btn btn-primary btn-sm" id="btnRobotConnect" data-loading-text="Connecting..." data-connected-text="[Connected] Click to disconnect to the NXT">[Disconnected] Click to connect to the robot</button>
                                                                
                                <br><br>
                                
                                <legend>Video stream</legend>
                                
                                <label for="videoStreamWsUrl">Websocket url : <input class="url" type="text" id="videoStreamWsUrl"></label>
                                
                                <br>
                                    
                                <label>
                                    Stream quality (0 -> 1) : <input  class="number" type="text" id="videoStreamQuality" value="0.25">    
                                </label>
                                
                                <label>
                                    FPS : <input class="number" type="text" id="videoStreamFPS" value="30">    
                                </label>

                                <button id="videoStreamConnectBtn" class="btn btn-primary btn-sm">Connect</button>
                                <button id="sendCameraConfBtn" class="btn btn-primary btn-sm">Update configuration</button>                              
                                
                                <legend>Voice recognition</legend>
                                
                                <button id="startVoiceRecognition" class="btn btn-success">Start voice recognition</button>
                                <button id="stopVoiceRecognition" class="btn btn-danger">Stop voice recognition</button>
                                
                                
                            </fieldset>
                            
                        </div>
                    </div>
                </div>
            
                <!-- ============= CONTROL TAB CONTENT================= -->
                 <div class="tab-pane" id="controlTab">
                     <div class="row">
                        <div class="col-md-8">
                           <div class="panel panel-primary">
                                <div class="panel-heading">
                                    <div class="row">
                                        <div class="col-sm-4">
                                            Virtual joystick control area
                                        </div>
                                        <div class="col-sm-3 col-sm-offset-1">
                                            Sensitivity : <span id="joystickSensitivityValue">x0.5</span>
                                        </div>
                                        <div class="col-sm-4">
                                            <div id="joystickSensitivitySlider"></div>
                                        </div>
                                    </div>
                                </div>
                                              
                                <div id="joystickControlArea"></div>
                                
                                <div class="panel-footer">
                                    <span id="axesValues">Axis values : </span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">                        
                            <div class="panel panel-primary sensorBox">
                                <div class="panel-heading"><label>Ultrasonics Sensor <input type="checkbox" id="activeUltrasonics"/></label></div>
                                <div class="panel-body centeredText">
                                    
                                    <div style="text-align: center">
                                        Front : <div id="frontUltrasonicSensorValue">??</div>
                                    </div>
                                    
                                    <div style="float: left">
                                        Left : <div id="leftUltrasonicSensorValue">??</div>
                                    </div>
                                    
                                    <div style="float: right">
                                        Right : <div id="rightUltrasonicSensorValue" style="float: right">??</div>    
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="panel panel-primary sensorBox">
                                <div class="panel-heading"><label>Compass Sensor <input type="checkbox" id="activeCompass"/></label></div>
                                <div class="panel-body centeredText">
                                    <div id="compassSensorValue">??</div>
                                </div>
                            </div>
                            
                             <div class="panel panel-primary sensorBox">
                                <div class="panel-heading"><label>Camera <input type="checkbox" id="activeCamera"/></label></div>
                                <div class="panel-body centeredText">
                                    <img class="pic" style="max-width: 100%; max-height: 100%">
                                </div>
                            </div>
                        </div>                                  
                    </div>
                                 
                 </div>
                  
                  <!-- ============= MAPPING TAB CONTROLL================= -->
                <div class="tab-pane active" id="mappingTab">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            Real time mapping
                            <button id="callMappingBtn" class="btn btn-success">Start mapping</button>
                            <button class="btn btn-warning" id="clearMapBtn">Clear map</button>
                            <button class="btn btn-danger" id="stopMappingBtn">Stop mapping</button>
                            
                            <button class="btn btn-primary" id="zoomInBtn">Zoom in</button>
                            <button class="btn btn-primary" id="zoomOutBtn">Zoom out</button>
                            
                            <a class="btn btn-primary" id="downloadMapBtn">Download the map</a>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-9">
                                <div class="pnael-body canvasContainer">                            
                                    <canvas id="mapCanvas"></canvas>
                                    <canvas id="mapCanvas2"></canvas>
                                </div>
                            </div>
                            
                            <div class="col-md-3">
                                <img class="pic" style="max-width: 100%; max-height: 100%; border: solid 1px;">
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                </div>
            
            <script src="js/jquery.js" type="text/javascript"></script>
            <script src="js/jquery-ui.min.js" type="text/javascript"></script>
            <script src="js/core.js" type="text/javascript"></script>
            <script src="js/bootstrap.min.js" type="text/javascript"></script>
            <script src="js/virtualjoystick.js" type="text/javascript"></script>
            <script src="js/MapObject.js" type="text/javascript"></script>
        </body>
    </html>